<!DOCTYPE html> <html lang="es"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width,initial-scale=1"> <title>Stats Tracker</title> <script src="https://cdn.tailwindcss.com"></script> <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet"> <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script> <style>:root{--bg:#F7F8FA;--card:#fff;--dark:#1f2937;--blue:#0056FF;--red:#dc2626;--orange:#f97316;--row:#f3f4f6}body{font-family:Inter,sans-serif;user-select:none;background:var(--bg)}.card{background:var(--card);color:var(--dark);border:1px solid #d1d5db;transition:all .2s;box-shadow:0 4px 10px -1px rgba(0,86,255,.1)}.card:hover{transform:translateY(-2px);box-shadow:0 8px 15px -3px rgba(0,86,255,.2)}.stat-row-bg{background:var(--row)}.score-pos{color:var(--blue)}.score-neg{color:var(--red)}.toast-notification{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%);background:#1f2937;color:#fff;padding:.75rem 1.5rem;border-radius:.5rem;z-index:9999;font-weight:600;opacity:0;transition:opacity .3s;pointer-events:none}.toast-visible{opacity:1}input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number]{-moz-appearance:textfield}</style> </head> <body class="text-gray-800 min-h-screen flex flex-col items-center p-4"> <main class="w-full max-w-5xl mx-auto space-y-8"> <header class="text-center relative"> <a href="../index_menu.html" class="absolute top-0 right-0 font-bold py-2 px-4 rounded-md text-sm text-white bg-[#0056FF] hover:bg-[#007bff] shadow-md">Menú</a> <h1 class="text-4xl font-extrabold sm:text-5xl">Control Voley <span class="text-yellow-600">Stats</span></h1> <p class="mt-4 text-gray-500 font-medium">Rendimiento en tiempo real.</p> </header> <div class="grid grid-cols-1 gap-8"> <div class="space-y-6"> <div class="card p-6 rounded-lg"> <h2 class="text-2xl font-semibold mb-4 border-b border-[#0056FF] text-[#0056FF]">Registrar Atleta</h2> <div class="flex flex-col sm:flex-row gap-4"> <input id="pNum" placeholder="Nro." class="w-full sm:w-24 border p-2 rounded" type="number"> <input id="pNam" placeholder="Nombre" class="flex-grow border p-2 rounded" type="text"> <button id="addP" class="bg-[#0056FF] text-white font-bold py-2 px-4 rounded shadow-lg">Agregar</button> </div> </div> <div class="card p-6 rounded-lg"> <h2 class="text-2xl font-semibold mb-4 border-b border-[#0056FF] text-[#0056FF]">Acción</h2> <form id="aFrm" class="space-y-4"> <select id="pSel" class="w-full border p-2 rounded"><option disabled selected>Agregar atleta primero</option></select> <select id="aSel" class="w-full border p-2 rounded"></select> <input id="qInp" value="1" type="hidden"> <button type="submit" class="w-full bg-[#0056FF] text-white font-bold py-2 rounded shadow-lg">Registrar</button> <button type="button" id="cSet" class="w-full bg-amber-600 text-white font-bold py-2 rounded mt-2">Reiniciar Set</button> <button type="button" id="cGam" class="w-full bg-red-600 text-white font-bold py-2 rounded mt-2">Borrar Todo</button> </form> </div> </div> <div class="card p-6 rounded-lg"><h2 class="text-2xl font-semibold mb-4 border-b border-[#0056FF] text-[#0056FF]">Estadística Atleta</h2><div id="sCont" class="space-y-3"></div></div> <div class="card p-6 rounded-lg"><h2 class="text-2xl font-semibold mb-4 border-b border-[#0056FF] text-[#0056FF]">Equipo</h2><div id="gCont" class="space-y-3"></div></div> <div class="card p-6 rounded-lg h-96"><canvas id="bChrt"></canvas></div> <div class="card p-6 rounded-lg h-96"><canvas id="aChrt"></canvas><div id="tSum" class="text-center mt-4 font-bold"></div></div> </div> </main> <footer class="mt-8 text-center text-gray-500 text-sm"> <p>© Sistematikos. Frank Hernandez</p> </footer> <script>(function(){let bC=null,aC=null,L=[],M=[],S=[];const N={'Servicio Bueno S#':1,'Ataque Bueno A#':1,'Bloqueo Bueno B#':1,'Coloque Bueno C#':1,'Servicio Malo S=':-1,'Ataque Malo A=':-1,'Bloqueo Malo B=':-1,'Recepción Mala R=':-1,'Coloque Malo C=':-1,'Defensa Mala D=':-1},O={S:'Servicio',A:'Ataque',B:'Bloqueo',R:'Recepción',C:'Coloque',D:'Defensa'},P={b:'#0056FF',r:'#dc2626',d:'#1f2937',o:'#f97316',g:'#10b981'},opt={responsive:true,maintainAspectRatio:false,scales:{y:{beginAtZero:true,ticks:{precision:0}}}};const _=(id)=>document.getElementById(id);function toast(m){const t=document.createElement('div');t.className='toast-notification';t.textContent=m;document.body.appendChild(t);setTimeout(()=>t.classList.add('toast-visible'),10);setTimeout(()=>{t.classList.remove('toast-visible');setTimeout(()=>t.remove(),300)},2000)}function save(){localStorage.setItem('vP',JSON.stringify(L));localStorage.setItem('vM',JSON.stringify(M));localStorage.setItem('vS',JSON.stringify(S))}function load(){L=JSON.parse(localStorage.getItem('vP')||'[]');M=JSON.parse(localStorage.getItem('vM')||'[]');S=JSON.parse(localStorage.getItem('vS')||'[]')}function upd(){const sc=_('sCont'),gc=_('gCont');sc.innerHTML='';if(!L.length){sc.innerHTML='<p class="text-center py-8">Sin atletas</p>';return}let pSt={};L.forEach(p=>pSt[p.number]={p:0,n:0,a:{}});S.forEach(l=>{let st=pSt[l.playerNumber];if(st){let v=N[l.action],q=l.quantity||1,t=l.action.charAt(l.action.length-2);v>0?st.p+=q:st.n+=q;if(!st.a[t])st.a[t]={p:0,n:0};v>0?st.a[t].p+=q:st.a[t].n+=q}});L.forEach(p=>{let st=pSt[p.number],diff=st.p-st.n,eff=(st.p+st.n)>0?(diff/(st.p+st.n)*100):0;let det='';Object.keys(st.a).forEach(k=>det+=`<span class="mr-2">${k}: <span class="score-pos">${st.a[k].p}</span>|<span class="score-neg">${st.a[k].n}</span></span>`);sc.innerHTML+=`<div class="stat-row-bg p-3 rounded shadow-sm mb-2"><div class="flex justify-between font-bold"><span>#${p.number} ${p.name}</span><span style="color:${eff>=0?P.g:P.r}">${eff.toFixed(1)}%</span></div><div class="text-xs border-y my-1 py-1">${det||'Sin datos'}</div><div class="flex justify-between"><span>Dif:</span><span class="font-bold">${diff}</span></div></div>`});let tP=0,tN=0,tA=0,tSt={};S.forEach(l=>{let v=N[l.action],q=l.quantity||1,t=l.action.charAt(l.action.length-2);if(!tSt[t])tSt[t]={p:0,n:0};v>0?(tSt[t].p+=q,tP+=q):(tSt[t].n+=q,tN+=q);tA+=q});let tEff=tA>0?((tP-tN)/tA*100):0;gc.innerHTML=`<div class="stat-row-bg p-3 rounded font-bold flex justify-between"><span>Eficiencia:</span><span style="color:${tEff>=0?P.g:P.r}">${tEff.toFixed(1)}%</span></div>`;Object.keys(tSt).forEach(k=>{let e=(tSt[k].p+tSt[k].n)>0?((tSt[k].p-tSt[k].n)/(tSt[k].p+tSt[k].n)*100):0;gc.innerHTML+=`<div class="p-2 border-b flex justify-between text-sm"><span>${O[k]}:</span><span>${tSt[k].p} | ${tSt[k].n} | ${e.toFixed(0)}%</span></div>`});chartUpdate()}function chartUpdate(){const ctxB=_('bChrt').getContext('2d'),ctxA=_('aChrt').getContext('2d');let bD={p:[],n:[],l:Object.values(O)};Object.keys(O).forEach(k=>{let p=0,n=0;S.forEach(l=>{if(l.action.charAt(l.action.length-2)===k){N[l.action]>0?p++:n++}});bD.p.push(p);bD.n.push(n)});if(bC)bC.destroy();bC=new Chart(ctxB,{type:'bar',data:{labels:bD.l,datasets:[{label:'+',data:bD.p,backgroundColor:P.b},{label:'-',data:bD.n,backgroundColor:P.o}]},options:opt});let aD={p:[],n:[],l:Object.values(O)},tp=0,tn=0;Object.keys(O).forEach(k=>{let p=0,n=0;M.forEach(l=>{if(l.action.charAt(l.action.length-2)===k){N[l.action]>0?(p++,tp++):(n++,tn++)}});aD.p.push(p);aD.n.push(n)});_('tSum').innerHTML=`Pos: ${tp} | Neg: ${tn}`;if(aC)aC.destroy();aC=new Chart(ctxA,{type:'bar',data:{labels:aD.l,datasets:[{label:'Pos',data:aD.p,backgroundColor:P.b},{label:'Neg',data:aD.n,backgroundColor:P.o}]},options:opt})}document.addEventListener('DOMContentLoaded',()=>{load();const ps=_('pSel'),as=_('aSel');function pP(){ps.innerHTML='';L.sort((a,b)=>a.number-b.number).forEach(p=>{let o=document.createElement('option');o.value=p.number;o.textContent=`#${p.number} ${p.name}`;ps.appendChild(o)})}function pA(){as.innerHTML='';Object.keys(N).forEach(k=>{let o=document.createElement('option');o.value=k;o.textContent=k;as.appendChild(o)})} _('addP').onclick=()=>{let n=parseInt(_('pNum').value),m=_('pNam').value;if(n&&m){L.push({number:n,name:m});save();pP();upd();_('pNum').value='';_('pNam').value='';toast('Agregado')}};_('aFrm').onsubmit=(e)=>{e.preventDefault();let p=parseInt(ps.value),a=as.value;if(p){let l={playerNumber:p,action:a,quantity:1};M.push(l);S.push(l);save();upd();toast('Registrado')}};_('cSet').onclick=()=>{if(confirm('Reiniciar Set?')){S=[];save();upd();toast('Set 0')}};_('cGam').onclick=()=>{if(confirm('Borrar todo?')){localStorage.clear();location.reload()}};pP();pA();upd()})})()</script> </body> </html>
